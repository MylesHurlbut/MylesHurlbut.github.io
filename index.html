<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="color-scheme" content="dark light">
  <meta name="robots" content="noindex">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Buck3y.net</title>
  <style>
    :root {
      --color-background: #1a1a1a;
      --color-background-overlay: rgba(0, 0, 0, 0.4);
      --color-rain: #2d2d2d;
      --color-text-subtle: #888;
      --color-text: #00ff41;
      --color-accent: #ff6b6b;
      --color-accent-2: #4ecdc4;
      --color-accent-3: #ffe66d;
      --font-family: -apple-system, Helvetica, sans-serif;
      --font-size-1: 1rem;
      --font-size-2: 3rem;
      --font-size-base: clamp(16px, 1.2vw, 18px);
      --font-weight-bold: 700;
      --font-weight-normal: 400;
      --line-height-base: 1.4;
      --space-1: 0.5rem;
      --space-2: 1rem;
      --space-3: 4rem;
      --transition-speed: 200ms;
      --border-glow: 0 0 5px rgba(0, 255, 65, 0.3);
    }

    @media (prefers-color-scheme: light) {
      :root {
        --color-background: #0f0f0f;
        --color-rain: #2d2d2d;
        --color-text-subtle: #888;
        --color-text: #00ff41;
      }
    }

    /* Gaming console pattern background */
    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-image: 
        radial-gradient(circle at 20% 20%, rgba(255, 107, 107, 0.1) 0%, transparent 50%),
        radial-gradient(circle at 80% 80%, rgba(78, 205, 196, 0.1) 0%, transparent 50%),
        radial-gradient(circle at 40% 60%, rgba(255, 230, 109, 0.1) 0%, transparent 50%);
      z-index: -2;
    }

    /* Add subtle smoke/vapor effect */
    .vapor-effect {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(45deg, transparent 30%, rgba(0, 255, 65, 0.02) 50%, transparent 70%);
      animation: vapor-drift 8s ease-in-out infinite;
      z-index: -1;
    }

    @keyframes vapor-drift {
      0%, 100% { transform: translateX(-10px) translateY(-10px); }
      50% { transform: translateX(10px) translateY(10px); }
    }

    /* Glitch effect for title */
    .glitch {
      position: relative;
      color: var(--color-text);
      font-size: var(--font-size-2);
      font-weight: var(--font-weight-bold);
    }

    .glitch::before,
    .glitch::after {
      content: attr(data-text);
      position: absolute;
      top: 0;
      left: 0;
      opacity: 0.8;
    }

    .glitch::before {
      color: var(--color-accent);
      animation: glitch-1 0.5s infinite;
      clip-path: polygon(0 0, 100% 0, 100% 45%, 0 45%);
    }

    .glitch::after {
      color: var(--color-accent-2);
      animation: glitch-2 0.5s infinite;
      clip-path: polygon(0 55%, 100% 55%, 100% 100%, 0 100%);
    }

    @keyframes glitch-1 {
      0%, 100% { transform: translateX(0); }
      20% { transform: translateX(-2px); }
      40% { transform: translateX(2px); }
      60% { transform: translateX(-2px); }
      80% { transform: translateX(2px); }
    }

    @keyframes glitch-2 {
      0%, 100% { transform: translateX(0); }
      20% { transform: translateX(2px); }
      40% { transform: translateX(-2px); }
      60% { transform: translateX(2px); }
      80% { transform: translateX(-2px); }
    }

    /* Nintendo-style button effects */
    .command:hover {
      transform: translateY(-2px);
      box-shadow: var(--border-glow);
    }

    /* 8-bit style icons with color cycling */
    .key {
      filter: hue-rotate(0deg);
      animation: rainbow-cycle 3s linear infinite;
      transition: all var(--transition-speed);
    }

    @keyframes rainbow-cycle {
      0% { filter: hue-rotate(0deg) brightness(1.2); }
      25% { filter: hue-rotate(90deg) brightness(1.2); }
      50% { filter: hue-rotate(180deg) brightness(1.2); }
      75% { filter: hue-rotate(270deg) brightness(1.2); }
      100% { filter: hue-rotate(360deg) brightness(1.2); }
    }

    html {
      background-color: var(--color-background);
      font-family: var(--font-family);
      font-size: var(--font-size-base);
      line-height: var(--line-height-base);
    }

    body {
      margin: 0;
    }

    main {
      align-items: center;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      justify-content: center;
      min-height: 100vh;
      overflow: hidden;
      padding: var(--space-3) var(--space-2);
      position: relative;
      width: 100vw;
    }

    h1 {
      margin: 0 0 var(--space-3) 0;
      text-align: center;
      position: relative;
    }

    .subtitle {
      color: var(--color-text-subtle);
      font-size: var(--font-size-1);
      font-weight: var(--font-weight-normal);
      margin-top: var(--space-1);
      text-align: center;
      display: block;
    }

    /* Gaming controller easter egg */
    .konami {
      position: fixed;
      bottom: 20px;
      right: 20px;
      color: var(--color-text-subtle);
      font-size: 0.8rem;
      opacity: 0.3;
      transition: opacity var(--transition-speed);
    }

    .konami:hover {
      opacity: 1;
    }

    /* Floating particles effect */
    .particle {
      position: fixed;
      width: 4px;
      height: 4px;
      background: var(--color-text);
      border-radius: 50%;
      pointer-events: none;
      animation: float 6s linear infinite;
      opacity: 0;
    }

    @keyframes float {
      0% {
        opacity: 0;
        transform: translateY(100vh) translateX(0px);
      }
      10% {
        opacity: 1;
      }
      90% {
        opacity: 1;
      }
      100% {
        opacity: 0;
        transform: translateY(-100px) translateX(50px);
      }
    }

    /* Add some retro gaming vibes with scanlines effect */
    .scanlines::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(
        to bottom,
        transparent 50%,
        rgba(0, 255, 65, 0.03) 51%
      );
      background-size: 1px 4px;
      pointer-events: none;
      z-index: 1000;
    }

    /* Custom styling for direct implementation */
    canvas.rain {
      left: 0;
      position: absolute;
      top: 0;
      z-index: -1;
    }

    .commands {
      columns: 1;
      list-style: none;
      margin: 0 auto;
      max-width: 10rem;
      padding: 0 0 0 var(--space-1);
      width: 100vw;
    }

    .command {
      display: flex;
      gap: var(--space-2);
      outline: 0;
      padding: var(--space-1);
      text-decoration: none;
      border-radius: 8px;
      transition: all var(--transition-speed);
      backdrop-filter: blur(5px);
      margin-bottom: 0.6rem;
      align-items: center;
    }

    .key {
      color: var(--color-text);
      display: inline-block;
      text-align: center;
      width: 3ch;
      font-size: 1.8rem;
      text-shadow: 0 0 5px currentColor;
    }

    .name {
      color: var(--color-text-subtle);
      transition: color var(--transition-speed);
      font-size: 1.2rem;
    }

    .command:where(:focus, :hover) .name {
      color: var(--color-text);
    }

    @media (min-width: 500px) {
      .commands {
        columns: 2;
        max-width: 20rem;
      }
    }

    @media (min-width: 700px) {
      .commands {
        columns: 3;
        max-width: 30rem;
      }
    }

    @media (min-width: 900px) {
      .commands {
        columns: 4;
        max-width: 40rem;
      }
    }

    @media (min-width: 1200px) {
      .commands {
        columns: 6;
        max-width: 60rem;
      }
    }

    /* Style updates for search and suggestions */
    .dialog {
      align-items: center;
      background: rgba(26, 26, 26, 0.95);
      backdrop-filter: blur(10px);
      border: none;
      display: none;
      flex-direction: column;
      height: 100%;
      justify-content: center;
      left: 0;
      padding: 0;
      top: 0;
      width: 100%;
      position: fixed;
      z-index: 100;
    }

    .dialog[open] {
      display: flex;
    }

    .form {
      width: 100%;
      max-width: 800px;
      margin: 0 auto;
    }

    .input {
      color: var(--color-text);
      font-size: var(--font-size-2);
      font-weight: var(--font-weight-bold);
      padding: 0;
      text-align: center;
      width: 100%;
      text-shadow: 0 0 10px currentColor;
      background: transparent;
      border: none;
      outline: none;
    }

    .suggestions {
      align-items: center;
      display: flex;
      flex-direction: column;
      flex-wrap: wrap;
      justify-content: center;
      list-style: none;
      margin: var(--space-2) auto;
      overflow: hidden;
      padding: 0;
      max-width: 800px;
    }

    .suggestion {
      color: var(--color-text);
      cursor: pointer;
      font-size: var(--font-size-1);
      padding: var(--space-2);
      position: relative;
      transition: color var(--transition-speed);
      white-space: nowrap;
      z-index: 1;
      border-radius: 8px;
      backdrop-filter: blur(5px);
      text-decoration: none;
      display: block;
    }

    .suggestion:where(:focus, :hover) {
      color: var(--color-background);
      box-shadow: var(--border-glow);
    }

    .suggestion::before {
      background-color: var(--color-text);
      bottom: var(--space-2);
      content: ' ';
      left: var(--space-2);
      opacity: 0;
      position: absolute;
      right: var(--space-2);
      top: var(--space-2);
      transform: translateY(0.5em);
      transition: all var(--transition-speed);
      z-index: -1;
      border-radius: 8px;
    }

    .suggestion:where(:focus, :hover)::before {
      opacity: 1;
      transform: translateY(0);
    }

    .match {
      color: var(--color-text-subtle);
      transition: color var(--transition-speed);
    }

    .suggestion:where(:focus, :hover) .match {
      color: var(--color-background);
    }

    @media (min-width: 700px) {
      .suggestions {
        flex-direction: row;
      }
    }
  </style>
</head>
<body class="scanlines">
  <div class="vapor-effect"></div>
  <main>
    <h1 class="glitch" data-text="Buck3y.net">Buck3y.net</h1>
    <span class="subtitle">  </span>
    
    <canvas class="rain" id="rainCanvas"></canvas>
    
    <nav>
      <menu class="commands">
        <li>
          <a class="command" rel="noopener noreferrer" href="https://mail.tutanota.com/">
            <span class="key">📬</span>
            <span class="name">Tutanota</span>
          </a>
        </li>
        <li>
          <a class="command" rel="noopener noreferrer" href="https://zemail.me/">
            <span class="key">📬 </span>
            <span class="name">Temp Mail</span>
          </a>
        </li>
        <li>
          <a class="command" rel="noopener noreferrer" href="https://webmail.disroot.org/">
            <span class="key">📬  </span>
            <span class="name">Disroot</span>
          </a>
        </li>
        <li>
          <a class="command" rel="noopener noreferrer" href="https://rss.buck3y.net/">
            <span class="key">🛜</span>
            <span class="name">RSS</span>
          </a>
        </li>
        <li>
          <a class="command" rel="noopener noreferrer" href="https://drive.buck3y.net/">
            <span class="key">📂</span>
            <span class="name">Drive</span>
          </a>
        </li>
        <li>
          <a class="command" rel="noopener noreferrer" href="https://notebook.buck3y.net/">
            <span class="key">📔</span>
            <span class="name">Notebook</span>
          </a>
        </li>
        <li>
          <a class="command" rel="noopener noreferrer" href="https://jellyfin.buck3y.net/">
            <span class="key">📺</span>
            <span class="name">Jellyfin</span>
          </a>
        </li>
        <li>
          <a class="command" rel="noopener noreferrer" href="https://jukebox.buck3y.net/">
            <span class="key">‍🎵 </span>
            <span class="name">Jukebox</span>
          </a>
        </li>
        <li>
          <a class="command" rel="noopener noreferrer" href="https://music.youtube.com/">
            <span class="key">🎵</span>
            <span class="name">YT Music</span>
          </a>
        </li>
        <li>
          <a class="command" rel="noopener noreferrer" href="https://youtube.com/">
            <span class="key">📺  </span>
            <span class="name">Youtube</span>
          </a>
        </li>
        <li>
          <a class="command" rel="noopener noreferrer" href="https://ipleak.net/">
            <span class="key">📍</span>
            <span class="name">IP Location</span>
          </a>
        </li>
        <li>
          <a class="command" rel="noopener noreferrer" href="https://real-debrid.com/speedtest">
            <span class="key">🪛</span>
            <span class="name">Speedtest</span>
          </a>
        </li>
        <li>
          <a class="command" rel="noopener noreferrer" href="https://seedbox.buck3y.net/">
            <span class="key">📡</span>
            <span class="name">Seedbox</span>
          </a>
        </li>
        <li>
          <a class="command" rel="noopener noreferrer" href="https://soulseek.buck3y.net/">
            <span class="key">📡 </span>
            <span class="name">Soulseek</span>
          </a>
        </li>
        <li>
          <a class="command" rel="noopener noreferrer" href="https://real-debrid.com/">
            <span class="key">🗄️</span>
            <span class="name">Debrid</span>
          </a>
        </li>
        <li>
          <a class="command" rel="noopener noreferrer" href="https://pastebin.com/">
            <span class="key">🗑️</span>
            <span class="name">Bin</span>
          </a>
        </li>
        <li>
          <a class="command" rel="noopener noreferrer" href="https://photos.buck3y.net/">
            <span class="key">📷</span>
            <span class="name">Photos</span>
          </a>
        </li>
        <li>
          <a class="command" rel="noopener noreferrer" href="https://admin.buck3y.net/">
            <span class="key">🧑‍💻</span>
            <span class="name">Admin</span>
          </a>
        </li>
      </menu>
    </nav>
    
    <dialog class="dialog" id="searchDialog">
      <form autocomplete="off" class="form" method="dialog" spellcheck="false">
        <input class="input" title="search" type="text" id="searchInput">
        <menu class="suggestions" id="suggestions"></menu>
      </form>
    </dialog>
    
    <div class="konami">↑↑↓↓←→←→BA</div>
  </main>

  <script>
    // Configuration
    const CONFIG = {
      commandPathDelimiter: '/',
      commandSearchDelimiter: ' ',
      defaultSearchTemplate: 'https://www.startpage.com/sp/search?query=%s&prf=off&ss=off',
      openLinksInNewTab: false,
      rainColumns: 200,
      rainFade: 0.2,
      rainFrameRate: 1000 / 18,
      rainResilience: 0.8,
      rainSpeed: 1,
      suggestionLimit: 4,
    };
    
    // Command definitions
    const COMMANDS = [
      ['📬', 'Tutanota', 'https://mail.tutanota.com'],
      ['📬 ', 'Temp Mail', 'https://zemail.me/'],
      ['📬  ', 'Disroot', 'https://webmail.disroot.org/'],
      ['🛜', 'RSS', 'https://rss.buck3y.net'],
      ['📂', 'Drive', 'https://drive.buck3y.net'],
      ['📔', 'Notebook', 'https://notebook.buck3y.net'],
      ['📺', 'Jellyfin', 'https://tv.room300.net'],
      ['‍🎵 ', 'Jukebox', 'https://jukebox.buck3y.net'],
      ['🎵', 'YT Music', 'https://music.youtube.com'],
      ['📺  ', 'Youtube', 'https://youtube.com'],
      ['📍', 'IP Location', 'https://ipleak.net/'],
      ['🪛', 'Speedtest', 'https://real-debrid.com/speedtest'],
      ['📡', 'Seedbox', 'https://seedbox.buck3y.net'],
      ['📡 ', 'Soulseek', 'https://soulseek.buck3y.net'],
      ['🗄️', 'Debrid', 'https://real-debrid.com/'],
      ['🗑️', 'Bin', 'https://pastebin.com/'],
      ['📷', 'Photos', 'https://photos.buck3y.net'],
      ['🧑‍💻', 'Admin', 'https://admin.buck3y.net']
    ];

    // Matrix rain effect
    function setupRain() {
      const canvas = document.getElementById('rainCanvas');
      const ctx = canvas.getContext('2d', { alpha: false });
      
      function resizeCanvas() {
        canvas.height = window.innerHeight;
        canvas.width = window.innerWidth;
        rainWidth = Math.ceil(canvas.width / CONFIG.rainColumns);
        rainHeight = rainWidth * CONFIG.rainSpeed;
        backgroundColor = getComputedStyle(document.body).getPropertyValue('--color-background');
        rainColor = getComputedStyle(document.body).getPropertyValue('--color-rain');
        
        ctx.fillStyle = backgroundColor;
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        
        drops = new Array(CONFIG.rainColumns).fill(0);
        lastRender = performance.now();
        requestAnimationFrame(renderRain);
      }
      
      let drops, rainWidth, rainHeight, backgroundColor, rainColor, lastRender;
      
      function renderRain(timestamp) {
        if (timestamp - lastRender >= CONFIG.rainFrameRate) {
          ctx.fillStyle = backgroundColor;
          ctx.globalAlpha = CONFIG.rainFade;
          ctx.fillRect(0, 0, canvas.width, canvas.height);
          
          for (let i = 0; i < drops.length; i++) {
            ctx.fillStyle = rainColor;
            ctx.globalAlpha = 1;
            const x = i * rainWidth;
            const y = drops[i] * rainHeight;
            ctx.fillRect(x, y, rainWidth, rainHeight);
            
            if (drops[i] <= 4) {
              // fully fade out previous rain drop streak
              ctx.fillStyle = backgroundColor;
              ctx.globalAlpha = drops[i] === 4 ? 1 : 0.4;
              const eraseY = y + rainHeight;
              const eraseHeight = canvas.height - eraseY;
              ctx.fillRect(x, eraseY, rainWidth, eraseHeight);
            }
            
            const reset = Math.random() > CONFIG.rainResilience;
            if (reset || y > canvas.height) drops[i] = 0;
            else drops[i]++;
          }
          
          lastRender = timestamp;
        }
        requestAnimationFrame(renderRain);
      }
      
      // Initial setup
      resizeCanvas();
      
      // Handle window resize
      window.addEventListener('resize', resizeCanvas);
    }

    // Enhanced Search functionality with suggestions
    function setupSearch() {
      const dialog = document.getElementById('searchDialog');
      const form = document.querySelector('.form');
      const input = document.getElementById('searchInput');
      const suggestions = document.getElementById('suggestions');
      
      // Helper functions
      function attachSearchPrefix(array, { key, splitBy }) {
        if (!splitBy) return array;
        return array.map((search) => `${key}${splitBy}${search}`);
      }
      
      function escapeRegexCharacters(s) {
        return s.replace(/[-\/\\^$*+?.()|[\]{}]/g, '\\// Search functionality
    function setupSearch() {
      const dialog = document.getElementById('searchDialog');
      const input = document.getElementById('searchInput');
      const suggestions = document.getElementById('suggestions');
      
      // Show search on key press
      document.addEventListener('keydown', (e) => {
        if (!dialog.open) {
          dialog.show();
          input.focus();
          requestAnimationFrame(() => {
            // close the search dialog before the next repaint if a character is
            // not produced (e.g. if you type shift, control, alt etc.)
            if (!input.value) closeSearch();
          });
          return;
        }
        
        if (e.key === 'Escape') {
          closeSearch();
          return;
        }
      });
      
      function closeSearch() {
        input.value = '';
        input.blur();
        dialog.close();
        suggestions.innerHTML = '';
      }
      
      // Add form submit handler
      document.querySelector('.form').addEventListener('submit', (e) => {
        e.preventDefault();
        const query = input.value.trim();
        
        if (!query) return closeSearch();
        
        // Simple search implementation
        let url = CONFIG.defaultSearchTemplate.replace(/%s/g, encodeURIComponent(query));
        
        // Check if it's a direct URL
        if (/^((https?:\/\/)?[\w-]+(\.[\w-]+)+\.?(:\d+)?(\/\S*)?)$/i.test(query)) {
          url = /^https?:\/\//i.test(query) ? query : `https://${query}`;
        }
        
        // Check if it's a command
        for (const [key, name, cmdUrl] of COMMANDS) {
          if (query === key) {
            url = cmdUrl;
            break;
          }
        }
        
        window.open(url, CONFIG.openLinksInNewTab ? '_blank' : '_self', 'noopener noreferrer');
        closeSearch();
      });
    }');
      }
      
      function fetchDuckDuckGoSuggestions(search) {
        return new Promise((resolve) => {
          window.autocompleteCallback = (res) => {
            const suggestions = [];
            for (const item of res) {
              if (item.phrase === search.toLowerCase()) continue;
              suggestions.push(item.phrase);
            }
            resolve(suggestions);
          };
          const script = document.createElement('script');
          document.querySelector('head').appendChild(script);
          script.src = `https://duckduckgo.com/ac/?callback=autocompleteCallback&q=${search}`;
          script.onload = script.remove;
        });
      }
      
      function hasProtocol(s) {
        return /^[a-zA-Z]+:\/\//i.test(s);
      }
      
      function isUrl(s) {
        return /^((https?:\/\/)?[\w-]+(\.[\w-]+)+\.?(:\d+)?(\/\S*)?)$/i.test(s);
      }
      
      function splitUrl(url) {
        const parser = document.createElement('a');
        parser.href = url;
        const baseUrl = `${parser.protocol}//${parser.hostname}`;
        const rest = `${parser.pathname}${parser.search}`;
        return [baseUrl, rest];
      }
      
      function formatSearchUrl(url, searchPath, search) {
        if (!searchPath) return url;
        const [baseUrl] = splitUrl(url);
        const urlQuery = encodeURIComponent(search);
        searchPath = searchPath.replace(/{}/g, urlQuery);
        return baseUrl + searchPath;
      }
      
      function parseQuery(raw) {
        const query = raw.trim();
        if (isUrl(query)) {
          const url = hasProtocol(query) ? query : `https://${query}`;
          return { query, url };
        }
        
        // Check command map
        const commandMap = new Map(COMMANDS.map(([key, name, url]) => [key, { name, url }]));
        
        if (commandMap.has(query)) {
          const { url } = commandMap.get(query);
          return { key: query, query, url };
        }
        
        // Try search delimiter
        let splitBy = CONFIG.commandSearchDelimiter;
        const [searchKey, rawSearch] = query.split(new RegExp(`${splitBy}(.*)`));
        
        if (commandMap.has(searchKey) && rawSearch) {
          const { url: base } = commandMap.get(searchKey);
          const search = rawSearch.trim();
          const url = formatSearchUrl(base, null, search);
          return { key: searchKey, query, search, splitBy, url };
        }
        
        // Try path delimiter
        splitBy = CONFIG.commandPathDelimiter;
        const [pathKey, path] = query.split(new RegExp(`${splitBy}(.*)`));
        
        if (commandMap.has(pathKey) && path) {
          const { url: base } = commandMap.get(pathKey);
          const [baseUrl] = splitUrl(base);
          const url = `${baseUrl}/${path}`;
          return { key: pathKey, path, query, splitBy, url };
        }
        
        // Default search
        const [baseUrl, rest] = splitUrl(CONFIG.defaultSearchTemplate);
        const url = formatSearchUrl(baseUrl, rest, query).replace(/%s/g, encodeURIComponent(query));
        return { query, search: query, url };
      }
      
      function closeSearch() {
        input.value = '';
        input.blur();
        dialog.close();
        suggestions.innerHTML = '';
      }
      
      function execute(query) {
        const { url } = parseQuery(query);
        const target = CONFIG.openLinksInNewTab ? '_blank' : '_self';
        window.open(url, target, 'noopener noreferrer');
        closeSearch();
      }
      
      async function onInput() {
        const oq = parseQuery(input.value);
        if (!oq.query) {
          closeSearch();
          return;
        }
        
        // Get suggestions
        let suggestionList = [];
        if (oq.search && suggestionList.length < CONFIG.suggestionLimit) {
          const res = await fetchDuckDuckGoSuggestions(oq.search);
          const formatted = attachSearchPrefix(res, oq);
          suggestionList = suggestionList.concat(formatted);
        }
        
        const nq = parseQuery(input.value);
        if (nq.query !== oq.query) return;
        
        renderSuggestions(suggestionList, oq.query);
      }
      
      function renderSuggestions(suggestions, query) {
        suggestions.innerHTML = '';
        const sliced = suggestions.slice(0, CONFIG.suggestionLimit);
        
        for (const [index, suggestion] of sliced.entries()) {
          const li = document.createElement('li');
          const a = document.createElement('a');
          a.className = 'suggestion';
          a.dataset.index = index;
          a.dataset.suggestion = suggestion;
          a.href = '#';
          a.tabIndex = 0;
          
          const escapedQuery = escapeRegexCharacters(query);
          const matched = suggestion.match(new RegExp(escapedQuery, 'i'));
          
          if (matched) {
            const pre = suggestion.slice(0, matched.index);
            const match = suggestion.slice(matched.index, matched.index + matched[0].length);
            const post = suggestion.slice(matched.index + matched[0].length);
            
            a.innerHTML = pre;
            const matchSpan = document.createElement('span');
            matchSpan.className = 'match';
            matchSpan.innerText = match;
            a.appendChild(matchSpan);
            a.innerHTML += post;
          } else {
            a.innerText = suggestion;
          }
          
          li.appendChild(a);
          suggestions.appendChild(li);
        }
      }
      
      function focusNextSuggestion(previous = false) {
        const active = document.activeElement;
        let nextIndex;
        
        if (active.dataset && active.dataset.index) {
          const activeIndex = Number(active.dataset.index);
          nextIndex = previous ? activeIndex - 1 : activeIndex + 1;
        } else {
          nextIndex = previous ? suggestions.childElementCount - 1 : 0;
        }
        
        const next = suggestions.children[nextIndex];
        if (next) next.querySelector('.suggestion').focus();
        else input.focus();
      }
      
      // Setup event listeners
      input.addEventListener('input', onInput);
      
      suggestions.addEventListener('click', (e) => {
        e.preventDefault();
        const suggestion = e.target.closest('.suggestion');
        if (!suggestion) return;
        execute(suggestion.dataset.suggestion);
      });
      
      document.addEventListener('keydown', (e) => {
        if (!dialog.open) {
          dialog.show();
          input.focus();
          requestAnimationFrame(() => {
            if (!input.value) closeSearch();
          });
          return;
        }
        
        if (e.key === 'Escape') {
          closeSearch();
          return;
        }
        
        const alt = e.altKey ? 'alt-' : '';
        const ctrl = e.ctrlKey ? 'ctrl-' : '';
        const meta = e.metaKey ? 'meta-' : '';
        const shift = e.shiftKey ? 'shift-' : '';
        const modifierPrefixedKey = `${alt}${ctrl}${meta}${shift}${e.key}`;
        
        if (/^(ArrowDown|Tab|ctrl-n)$/.test(modifierPrefixedKey)) {
          e.preventDefault();
          focusNextSuggestion();
          return;
        }
        
        if (/^(ArrowUp|ctrl-p|shift-Tab)$/.test(modifierPrefixedKey)) {
          e.preventDefault();
          focusNextSuggestion(true);
        }
      });
      
      form.addEventListener('submit', (e) => {
        e.preventDefault();
        execute(input.value);
      });
    }

    // Setup floating particles
    function createParticle() {
      const particle = document.createElement('div');
      particle.className = 'particle';
      particle.style.left = Math.random() * window.innerWidth + 'px';
      particle.style.animationDelay = Math.random() * 2 + 's';
      particle.style.animationDuration = (Math.random() * 4 + 2) + 's';
      document.body.appendChild(particle);
      
      setTimeout(() => {
        particle.remove();
      }, 6000);
    }

    // Konami code easter egg
    function setupKonami() {
      let konamiCode = [];
      const konami = [38, 38, 40, 40, 37, 39, 37, 39, 66, 65]; // ↑↑↓↓←→←→BA
      
      document.addEventListener('keydown', (e) => {
        konamiCode.push(e.keyCode);
        konamiCode = konamiCode.slice(-konami.length);
        
        if (konamiCode.join(',') === konami.join(',')) {
          // Activate special Room300 mode
          document.body.style.filter = 'hue-rotate(90deg) saturate(1.5)';
          setTimeout(() => {
            document.body.style.filter = '';
          }, 3000);
        }
      });
    }

    // Initialize everything
    document.addEventListener('DOMContentLoaded', function() {
      setupRain();
      setupSearch();
      setupKonami();
      
      // Create particles periodically
      setInterval(createParticle, 800);
    });

    // Console messages
    console.log('Room300 - Where legends were made 🎮');
    console.log('FMS Class of 2024 🎓');
    console.log('Best times with the best friends 👬');
  </script>
</body>
</html>
