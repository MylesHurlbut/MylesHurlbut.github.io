    // Update clock
    function updateClock() {
      const now = new Date();
      
      // Update digital clock
      const hours = state.is24Hour ? now.getHours() : now.getHours() % 12 || 12;
      const minutes = now.getMinutes().toString().padStart(2, '0');
      const seconds = now.getSeconds().toString().padStart(2, '0');
      const ampm = state.is24Hour ? '' : now.getHours() >= 12 ? ' PM' : ' AM';
      
      const clockText = `${hours}:${minutes}:${seconds}${ampm}`;
      elements.digitalClock.textContent = clockText;
      elements.digitalClock.setAttribute('data-text', clockText);
      
      // Update date display
      const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
      elements.dateDisplay.textContent = now.toLocaleDateString(undefined, options);
      
      // Update header time
      const headerHours<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="color-scheme" content="dark">
  <meta name="robots" content="noindex">
  <title>chooch.net - Command Center</title>
  <style>
    :root {
      /* Vaporwave color palette */
      --color-bg-primary: #0b0421;
      --color-bg-secondary: #1f0f40;
      --color-accent-primary: #ff00ff;
      --color-accent-secondary: #00ffff;
      --color-accent-tertiary: #ff6b6b;
      --color-text-primary: #f3f4f6;
      --color-text-secondary: #9ca3af;
      
      /* Animation speeds */
      --transition-fast: 150ms;
      --transition-medium: 250ms;
      --transition-slow: 350ms;

      /* Spacing */
      --space-1: 0.25rem;
      --space-2: 0.5rem;
      --space-3: 1rem;
      --space-4: 1.5rem;
      --space-5: 2rem;
      --space-6: 3rem;
      
      /* Typography */
      --font-main: 'Inter', system-ui, -apple-system, sans-serif;
      --font-mono: 'JetBrains Mono', 'Roboto Mono', 'Fira Code', monospace;
      --font-weight-normal: 400;
      --font-weight-medium: 500;
      --font-weight-bold: 700;
    }

    /* Modern CSS Reset */
    *, *::before, *::after {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html {
      font-family: var(--font-main);
      background-color: var(--color-bg-primary);
      color: var(--color-text-primary);
      font-size: 16px;
      line-height: 1.5;
      scroll-behavior: smooth;
      height: 100%;
    }

    body {
      min-height: 100vh;
      overflow-x: hidden;
      display: flex;
      flex-direction: column;
    }

    /* Header Styles */
    .header {
      width: 100%;
      padding: var(--space-4);
      position: relative;
      z-index: 10;
    }

    .header-content { 
      max-width: 1200px; 
      margin: 0 auto; 
      padding: 0 var(--space-3); 
      display: flex; 
      align-items: center; 
      justify-content: center; 
      gap: var(--space-5); 
    } 

    .logo {
      position: relative;
      color: #00ff41;
      font-size: 3rem;
      font-weight: var(--font-weight-bold);
      text-decoration: none;
      text-transform: uppercase;
      letter-spacing: 2px;
      /* Reset any inherited gradient styles */
      background: transparent !important;
      background-clip: unset !important;
      -webkit-background-clip: unset !important;
      -webkit-text-fill-color: unset !important;
    }

    /* Vaporwave glitch effect */
    .glitch::before, 
    .glitch::after { 
      content: attr(data-text); 
      position: absolute; 
      top: 0; 
      left: 0; 
      opacity: 0.8; 
    } 

    .glitch::before { 
      color: var(--color-accent-primary);
      animation: glitch-1 2s infinite; 
      clip-path: polygon(0 0, 100% 0, 100% 45%, 0 45%); 
      transform: translate(-2px, 0);
    } 

    .glitch::after { 
      color: var(--color-accent-secondary); 
      animation: glitch-2 2s infinite; 
      clip-path: polygon(0 55%, 100% 55%, 100% 100%, 0 100%); 
      transform: translate(2px, 0);
    } 

    @keyframes glitch-1 { 
      0%, 100% { transform: translateX(0); } 
      20% { transform: translateX(-2px); } 
      40% { transform: translateX(2px); } 
      60% { transform: translateX(-1px); } 
      80% { transform: translateX(1px); } 
    } 

    @keyframes glitch-2 { 
      0%, 100% { transform: translateX(0); } 
      20% { transform: translateX(2px); } 
      40% { transform: translateX(-2px); } 
      60% { transform: translateX(1px); } 
      80% { transform: translateX(-1px); } 
    }

    /* Main Content */
    .main-container {
      flex: 1;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      padding: var(--space-4);
      position: relative;
      z-index: 2;
    }

    /* Search Bar */
    .search-container {
      width: 100%;
      max-width: 600px;
      margin-bottom: var(--space-6);
    }

    .search-bar {
      width: 100%;
      background-color: var(--color-bg-secondary);
      border: 2px solid rgba(124, 58, 237, 0.3);
      border-radius: 12px;
      padding: var(--space-3) var(--space-4);
      color: var(--color-text-primary);
      font-size: 1.1rem;
      transition: all var(--transition-medium);
      outline: none;
    }

    .search-bar:focus {
      border-color: var(--color-accent-primary);
      box-shadow: 0 0 0 3px rgba(124, 58, 237, 0.2);
    }

    /* Commands Grid */
    .commands-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
      gap: var(--space-4);
      width: 100%;
      max-width: 1200px;
    }

    .command-card {
      background-color: rgba(31, 15, 64, 0.6);
      border-radius: 12px;
      padding: var(--space-4);
      text-align: center;
      transition: all var(--transition-medium);
      cursor: pointer;
      position: relative;
      overflow: hidden;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .command-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3), 0 0 15px var(--color-accent-primary);
      border-color: var(--color-accent-primary);
    }

    .command-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(45deg, 
                 rgba(255, 0, 255, 0.2), 
                 rgba(0, 255, 255, 0.1));
      opacity: 0;
      transition: opacity var(--transition-medium);
      z-index: 0;
    }

    .command-card:hover::before {
      opacity: 1;
    }

    .command-icon {
      font-size: 2rem;
      margin-bottom: var(--space-3);
      position: relative;
      z-index: 1;
    }

    .command-name {
      font-weight: var(--font-weight-medium);
      color: var(--color-text-primary);
      position: relative;
      z-index: 1;
    }

    /* Categories */
    .categories {
      display: flex;
      gap: var(--space-3);
      margin-bottom: var(--space-5);
      flex-wrap: wrap;
      justify-content: center;
    }

    .category-btn {
      background-color: rgba(31, 15, 64, 0.4);
      border: 1px solid rgba(255, 0, 255, 0.3);
      color: var(--color-text-secondary);
      padding: var(--space-2) var(--space-3);
      border-radius: 20px;
      cursor: pointer;
      transition: all var(--transition-fast);
      font-weight: var(--font-weight-medium);
      text-transform: uppercase;
      letter-spacing: 1px;
      font-size: 0.9rem;
    }

    .category-btn:hover {
      background-color: rgba(255, 0, 255, 0.2);
      color: var(--color-accent-primary);
      border-color: var(--color-accent-primary);
      box-shadow: 0 0 10px rgba(255, 0, 255, 0.4);
    }

    .category-btn.active {
      background-color: var(--color-accent-primary);
      color: white;
      border-color: var(--color-accent-primary);
      box-shadow: 0 0 15px rgba(255, 0, 255, 0.6);
    }

    /* Time and Weather */
    .time-weather {
      position: absolute;
      top: var(--space-4);
      right: var(--space-4);
      text-align: right;
      font-weight: var(--font-weight-normal);
      color: var(--color-text-secondary);
      display: flex;
      flex-direction: column;
      align-items: flex-end;
    }

    .time {
      font-size: 1.1rem;
      margin-bottom: var(--space-1);
    }

    .weather {
      display: flex;
      align-items: center;
      gap: var(--space-2);
    }

    /* Background Animation */
    .background-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 1;
      overflow: hidden;
      opacity: 0.7;
      background: linear-gradient(to bottom, var(--color-bg-primary), #000);
    }

    canvas {
      display: block;
      width: 100%;
      height: 100%;
    }

    /* Quick Action Button */
    .quick-actions {
      position: fixed;
      bottom: var(--space-4);
      right: var(--space-4);
      z-index: 10;
    }

    .quick-action-btn {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background-color: var(--color-accent-primary);
      color: white;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 1.5rem;
      border: none;
      cursor: pointer;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
      transition: all var(--transition-fast);
    }

    .quick-action-btn:hover {
      background-color: var(--color-accent-secondary);
      transform: translateY(-3px);
    }

    .quick-menu {
      position: absolute;
      bottom: 60px;
      right: 0;
      background-color: var(--color-bg-secondary);
      border-radius: 12px;
      padding: var(--space-3);
      display: none;
      flex-direction: column;
      gap: var(--space-2);
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
      min-width: 200px;
    }

    .quick-menu.open {
      display: flex;
    }

    .quick-menu-item {
      display: flex;
      align-items: center;
      gap: var(--space-2);
      padding: var(--space-2);
      color: var(--color-text-primary);
      text-decoration: none;
      transition: all var(--transition-fast);
      border-radius: 6px;
    }

    .quick-menu-item:hover {
      background-color: rgba(124, 58, 237, 0.2);
    }

    /* Settings Panel */
    .settings-panel {
      position: fixed;
      top: 0;
      right: -350px;
      width: 350px;
      height: 100%;
      background-color: var(--color-bg-secondary);
      z-index: 100;
      padding: var(--space-4);
      transition: right var(--transition-medium);
      box-shadow: -5px 0 20px rgba(0, 0, 0, 0.5);
      overflow-y: auto;
    }

    .settings-panel.open {
      right: 0;
    }

    .settings-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: var(--space-4);
      padding-bottom: var(--space-3);
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .settings-title {
      font-size: 1.3rem;
      font-weight: var(--font-weight-bold);
    }

    .close-settings {
      background: none;
      border: none;
      color: var(--color-text-secondary);
      font-size: 1.5rem;
      cursor: pointer;
      transition: color var(--transition-fast);
    }

    .close-settings:hover {
      color: var(--color-accent-tertiary);
    }

    .settings-section {
      margin-bottom: var(--space-4);
    }

    .settings-section-title {
      font-size: 1rem;
      font-weight: var(--font-weight-medium);
      color: var(--color-text-secondary);
      margin-bottom: var(--space-3);
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .theme-colors {
      display: flex;
      gap: var(--space-2);
      margin-bottom: var(--space-3);
    }

    .color-option {
      width: 30px;
      height: 30px;
      border-radius: 50%;
      cursor: pointer;
      border: 2px solid transparent;
      transition: transform var(--transition-fast);
    }

    .color-option:hover {
      transform: scale(1.1);
    }

    .color-option.active {
      border-color: white;
    }

    .setting-group {
      margin-bottom: var(--space-3);
    }

    .setting-label {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: var(--space-2);
    }

    .toggle-switch {
      position: relative;
      display: inline-block;
      width: 40px;
      height: 20px;
    }

    .toggle-switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }

    .toggle-slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: #374151;
      transition: var(--transition-fast);
      border-radius: 20px;
    }

    .toggle-slider:before {
      position: absolute;
      content: "";
      height: 16px;
      width: 16px;
      left: 2px;
      bottom: 2px;
      background-color: white;
      transition: var(--transition-fast);
      border-radius: 50%;
    }

    input:checked + .toggle-slider {
      background-color: var(--color-accent-primary);
    }

    input:checked + .toggle-slider:before {
      transform: translateX(20px);
    }

    /* Footer */
    .footer {
      text-align: center;
      padding: var(--space-4);
      color: var(--color-text-secondary);
      font-size: 0.9rem;
      position: relative;
      z-index: 5;
    }

    /* Keyboard shortcuts modal */
    .shortcuts-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.8);
      z-index: 1000;
      justify-content: center;
      align-items: center;
    }

    .shortcuts-content {
      background-color: var(--color-bg-secondary);
      border-radius: 12px;
      padding: var(--space-5);
      max-width: 600px;
      width: 90%;
      max-height: 80vh;
      overflow-y: auto;
    }

    .shortcuts-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: var(--space-4);
    }

    .shortcuts-title {
      font-size: 1.3rem;
      font-weight: var(--font-weight-bold);
    }

    .close-shortcuts {
      background: none;
      border: none;
      color: var(--color-text-secondary);
      font-size: 1.5rem;
      cursor: pointer;
    }

    .shortcut-group {
      margin-bottom: var(--space-4);
    }

    .shortcut-group-title {
      font-size: 1rem;
      color: var(--color-text-secondary);
      margin-bottom: var(--space-3);
      padding-bottom: var(--space-2);
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .shortcut-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: var(--space-2);
    }

    .key-combo {
      display: flex;
      gap: var(--space-1);
    }

    .key {
      background-color: rgba(255, 255, 255, 0.1);
      color: var(--color-text-primary);
      padding: 2px 8px;
      border-radius: 4px;
      font-family: var(--font-mono);
      font-size: 0.9rem;
    }

    /* Mobile responsive styles */
    @media (max-width: 768px) {
      .header-content {
        flex-direction: column;
        gap: var(--space-3);
      }
      
      .logo {
        font-size: 2.5rem;
      }
      
      .commands-grid {
        grid-template-columns: repeat(auto-fill, minmax(110px, 1fr));
        gap: var(--space-3);
      }
      
      .command-card {
        padding: var(--space-3);
      }
      
      .command-icon {
        font-size: 1.8rem;
      }
      
      .command-name {
        font-size: 0.9rem;
      }
      
      .settings-panel {
        width: 300px;
      }
      
      .digital-clock {
        font-size: 2.5rem;
      }
    }

    @media (max-width: 480px) {
      .header {
        padding: var(--space-3);
      }
      
      .logo {
        font-size: 2rem;
      }
      
      .time-weather {
        display: none;
      }
      
      .categories {
        gap: var(--space-2);
        margin-bottom: var(--space-4);
      }
      
      .category-btn {
        padding: var(--space-1) var(--space-2);
        font-size: 0.8rem;
      }
      
      .commands-grid {
        grid-template-columns: repeat(auto-fill, minmax(90px, 1fr));
        gap: var(--space-2);
      }
      
      .settings-panel {
        width: 100%;
        right: -100%;
      }
      
      .digital-clock {
        font-size: 2rem;
      }
    }

    /* Animations */
    @keyframes pulse {
      0% {
        transform: scale(1);
      }
      50% {
        transform: scale(1.05);
      }
      100% {
        transform: scale(1);
      }
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
      }
      to {
        opacity: 1;
      }
    }

    .pulse {
      animation: pulse 2s infinite ease-in-out;
    }

    .fadeIn {
      animation: fadeIn 0.5s ease-out forwards;
    }

    /* Additional utility classes */
    .hidden {
      display: none !important;
    }

    .flex {
      display: flex;
    }

    .flex-col {
      flex-direction: column;
    }

    .items-center {
      align-items: center;
    }

    .justify-between {
      justify-content: space-between;
    }

    .gap-2 {
      gap: var(--space-2);
    }

    .gap-3 {
      gap: var(--space-3);
    }

    .mb-3 {
      margin-bottom: var(--space-3);
    }

    .mb-4 {
      margin-bottom: var(--space-4);
    }

    /* Clock styles */
    .clock-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-bottom: var(--space-5);
      position: relative;
    }

    .digital-clock {
      font-size: 3.5rem;
      font-weight: 300;
      font-family: var(--font-mono);
      color: var(--color-accent-secondary);
      margin-bottom: var(--space-1);
      letter-spacing: 2px;
      text-shadow: 0 0 10px rgba(0, 255, 255, 0.7);
      position: relative;
    }

    .digital-clock::before {
      content: attr(data-text);
      position: absolute;
      left: -2px;
      top: 0;
      color: var(--color-accent-primary);
      opacity: 0.7;
      z-index: -1;
    }

    .date-display {
      color: var(--color-text-secondary);
      font-size: 1rem;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    /* Search suggestions */
    .search-suggestions {
      background-color: var(--color-bg-secondary);
      border-radius: 0 0 12px 12px;
      overflow: hidden;
      position: absolute;
      width: 100%;
      max-height: 300px;
      overflow-y: auto;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
      border: 2px solid var(--color-accent-primary);
      border-top: none;
      display: none;
      z-index: 50;
    }

    .suggestion-item {
      padding: var(--space-2) var(--space-3);
      cursor: pointer;
      transition: background-color var(--transition-fast);
    }

    .suggestion-item:hover, .suggestion-item.active {
      background-color: rgba(124, 58, 237, 0.2);
    }

    .search-wrapper {
      position: relative;
      width: 100%;
    }
  </style>
</head>
<body>
  <!-- Background Animation Container -->
  <div class="background-container">
    <canvas id="backgroundCanvas"></canvas>
  </div>

  <!-- Header -->
  <header class="header">
    <div class="header-content">
      <a href="#" class="logo glitch" data-text="CHOOCH.NET">
        CHOOCH.NET
      </a>
      <div class="time-weather">
        <div class="time" id="current-time">12:30 PM</div>
        <div class="weather" id="weather-display">
          <span>72°F</span>
          <span>☀️</span>
        </div>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="main-container">
    <!-- Clock Display -->
    <div class="clock-container">
      <div class="digital-clock" id="digital-clock">00:00:00</div>
      <div class="date-display" id="date-display">Tuesday, May 20, 2025</div>
    </div>

    <!-- Search Bar -->
    <div class="search-container">
      <div class="search-wrapper">
        <input type="text" class="search-bar" id="searchBar" placeholder="Search or enter command..." autocomplete="off">
        <div class="search-suggestions" id="searchSuggestions"></div>
      </div>
    </div>

    <!-- Categories -->
    <div class="categories" id="categories">
      <button class="category-btn active" data-category="all">All</button>
      <button class="category-btn" data-category="mail">Mail</button>
      <button class="category-btn" data-category="media">Media</button>
      <button class="category-btn" data-category="tools">Tools</button>
      <button class="category-btn" data-category="storage">Storage</button>
    </div>

    <!-- Commands Grid -->
    <div class="commands-grid" id="commandsGrid">
      <!-- Command items will be generated by JavaScript -->
    </div>
  </main>

  <!-- Footer -->
  <footer class="footer">
    <p>Press <span class="key">?</span> for keyboard shortcuts</p>
  </footer>

  <!-- Quick Actions -->
  <div class="quick-actions">
    <button class="quick-action-btn" id="quickActionBtn">+</button>
    <div class="quick-menu" id="quickMenu">
      <a href="#" class="quick-menu-item" id="openSettings">
        <span>⚙️</span>
        <span>Settings</span>
      </a>
      <a href="#" class="quick-menu-item" id="toggleTheme">
        <span>🌙</span>
        <span>Toggle Theme</span>
      </a>
      <a href="#" class="quick-menu-item" id="toggleAnimation">
        <span>✨</span>
        <span>Toggle Animation</span>
      </a>
      <a href="#" class="quick-menu-item" id="openShortcuts">
        <span>⌨️</span>
        <span>Keyboard Shortcuts</span>
      </a>
    </div>
  </div>

  <!-- Settings Panel -->
  <div class="settings-panel" id="settingsPanel">
    <div class="settings-header">
      <h2 class="settings-title">Settings</h2>
      <button class="close-settings" id="closeSettings">×</button>
    </div>
    
    <div class="settings-section">
      <h3 class="settings-section-title">Theme</h3>
      <div class="theme-colors">
        <div class="color-option active" style="background: linear-gradient(45deg, #ff00ff, #00ffff);" data-theme="default"></div>
        <div class="color-option" style="background: linear-gradient(45deg, #ff71ce, #01cdfe);" data-theme="blue-pink"></div>
        <div class="color-option" style="background: linear-gradient(45deg, #f59e0b, #ef4444);" data-theme="amber-red"></div>
        <div class="color-option" style="background: linear-gradient(45deg, #10b981, #3b82f6);" data-theme="green-blue"></div>
        <div class="color-option" style="background: linear-gradient(45deg, #8b5cf6, #6366f1);" data-theme="purple-indigo"></div>
      </div>
    </div>
    
    <div class="settings-section">
      <h3 class="settings-section-title">Display</h3>
      
      <div class="setting-group">
        <div class="setting-label">
          <span>Dark Mode</span>
          <label class="toggle-switch">
            <input type="checkbox" id="darkModeToggle" checked>
            <span class="toggle-slider"></span>
          </label>
        </div>
      </div>
      
      <div class="setting-group">
        <div class="setting-label">
          <span>Background Animation</span>
          <label class="toggle-switch">
            <input type="checkbox" id="bgAnimationToggle" checked>
            <span class="toggle-slider"></span>
          </label>
        </div>
      </div>
      
      <div class="setting-group">
        <div class="setting-label">
          <span>24-Hour Clock</span>
          <label class="toggle-switch">
            <input type="checkbox" id="clockFormatToggle">
            <span class="toggle-slider"></span>
          </label>
        </div>
      </div>
      
      <div class="setting-group">
        <div class="setting-label">
          <span>Show Weather</span>
          <label class="toggle-switch">
            <input type="checkbox" id="weatherToggle" checked>
            <span class="toggle-slider"></span>
          </label>
        </div>
      </div>
    </div>
    
    <div class="settings-section">
      <h3 class="settings-section-title">Search</h3>
      
      <div class="setting-group">
        <div class="setting-label">
          <span>Default Search Engine</span>
          <select id="searchEngineSelect" class="search-engine-select">
            <option value="https://www.startpage.com/sp/search?query={}&abp=1&t=night">Startpage</option>
            <option value="https://duckduckgo.com/?q={}">DuckDuckGo</option>
            <option value="https://search.brave.com/search?q={}">Brave Search</option>
            <option value="https://www.google.com/search?q={}">Google</option>
          </select>
        </div>
      </div>
      
      <div class="setting-group">
        <div class="setting-label">
          <span>Open in New Tab</span>
          <label class="toggle-switch">
            <input type="checkbox" id="newTabToggle">
            <span class="toggle-slider"></span>
          </label>
        </div>
      </div>
    </div>
    
    <div class="settings-section">
      <h3 class="settings-section-title">Custom Commands</h3>
      <p class="mb-3">Add or edit your command shortcuts</p>
      <button id="addCommandBtn" class="category-btn">+ Add Command</button>
    </div>
  </div>

  <!-- Keyboard Shortcuts Modal -->
  <div class="shortcuts-modal" id="shortcutsModal">
    <div class="shortcuts-content">
      <div class="shortcuts-header">
        <h2 class="shortcuts-title">Keyboard Shortcuts</h2>
        <button class="close-shortcuts" id="closeShortcuts">×</button>
      </div>
      
      <div class="shortcut-group">
        <h3 class="shortcut-group-title">Navigation</h3>
        
        <div class="shortcut-item">
          <span>Focus search</span>
          <div class="key-combo">
            <span class="key">/</span>
          </div>
        </div>
        
        <div class="shortcut-item">
          <span>Open settings</span>
          <div class="key-combo">
            <span class="key">S</span>
          </div>
        </div>
        
        <div class="shortcut-item">
          <span>Toggle quick menu</span>
          <div class="key-combo">
            <span class="key">Q</span>
          </div>
        </div>
      </div>
      
      <div class="shortcut-group">
        <h3 class="shortcut-group-title">Commands</h3>
        
        <div class="shortcut-item">
          <span>Filter by category</span>
          <div class="key-combo">
            <span class="key">1</span>
            <span>-</span>
            <span class="key">5</span>
          </div>
        </div>
        
        <div class="shortcut-item">
          <span>Open first command</span>
          <div class="key-combo">
            <span class="key">Alt</span>
            <span>+</span>
            <span class="key">1</span>
          </div>
        </div>
        
        <div class="shortcut-item">
          <span>Toggle dark/light mode</span>
          <div class="key-combo">
            <span class="key">Alt</span>
            <span>+</span>
            <span class="key">D</span>
          </div>
        </div>
      </div>
      
      <div class="shortcut-group">
        <h3 class="shortcut-group-title">Misc</h3>
        
        <div class="shortcut-item">
          <span>Show this help</span>
          <div class="key-combo">
            <span class="key">?</span>
          </div>
        </div>
        
        <div class="shortcut-item">
          <span>Toggle animation</span>
          <div class="key-combo">
            <span class="key">Alt</span>
            <span>+</span>
            <span class="key">A</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- JavaScript -->
  <script>
    // Command data with categories
          const COMMANDS = [
      { key: '📬', name: 'Tutanota', url: 'https://mail.tutanota.com', category: 'mail' },
      { key: '📬', name: 'Temp Mail', url: 'https://zemail.me', category: 'mail' },
      { key: '📬', name: 'Disroot', url: 'https://webmail.disroot.org', category: 'mail' },
      { key: '🛜', name: 'RSS', url: 'https://rss.chooch.net', category: 'media' },
      { key: '📂', name: 'Drive', url: 'https://drive.chooch.net', category: 'storage' },
      { key: '📔', name: 'Notebook', url: 'https://notebook.chooch.net', category: 'tools' },
      { key: '📺', name: 'Jellyfin', url: 'https://tv.chooch.net', category: 'media' },
      { key: '🎵', name: 'Jukebox', url: 'https://jukebox.chooch.net', category: 'media' },
      { key: '🎵', name: 'YT Music', url: 'https://music.youtube.com', category: 'media' },
      { key: '📺', name: 'YouTube', url: 'https://youtube.com', category: 'media' },
      { key: '📍', name: 'IP Location', url: 'https://ipleak.net', category: 'tools' },
      { key: '🪛', name: 'Speedtest', url: 'https://real-debrid.com/speedtest', category: 'tools' },
      { key: '📡', name: 'Seedbox', url: 'https://seedbox.chooch.net', category: 'tools' },
      { key: '📡', name: 'Soulseek', url: 'https://soulseek.chooch.net', category: 'media' },
      { key: '🗄️', name: 'Debrid', url: 'https://real-debrid.com', category: 'tools' },
      { key: '🗑️', name: 'Bin', url: 'https://bin.chooch.net', category: 'storage' },
      { key: '📷', name: 'Photos', url: 'https://photos.chooch.net', category: 'media' },
      { key: '🧑‍💻', name: 'Admin', url: 'https://admin.chooch.net', category: 'tools' },
    ];

    // DOM Elements
    const elements = {
      commandsGrid: document.getElementById('commandsGrid'),
      categories: document.getElementById('categories'),
      searchBar: document.getElementById('searchBar'),
      searchSuggestions: document.getElementById('searchSuggestions'),
      quickActionBtn: document.getElementById('quickActionBtn'),
      quickMenu: document.getElementById('quickMenu'),
      settingsPanel: document.getElementById('settingsPanel'),
      openSettings: document.getElementById('openSettings'),
      closeSettings: document.getElementById('closeSettings'),
      digitalClock: document.getElementById('digital-clock'),
      dateDisplay: document.getElementById('date-display'),
      currentTime: document.getElementById('current-time'),
      weatherDisplay: document.getElementById('weather-display'),
      backgroundCanvas: document.getElementById('backgroundCanvas'),
      shortcutsModal: document.getElementById('shortcutsModal'),
      openShortcuts: document.getElementById('openShortcuts'),
      closeShortcuts: document.getElementById('closeShortcuts'),
      toggleTheme: document.getElementById('toggleTheme'),
      toggleAnimation: document.getElementById('toggleAnimation'),
      darkModeToggle: document.getElementById('darkModeToggle'),
      bgAnimationToggle: document.getElementById('bgAnimationToggle'),
      clockFormatToggle: document.getElementById('clockFormatToggle'),
      weatherToggle: document.getElementById('weatherToggle'),
      searchEngineSelect: document.getElementById('searchEngineSelect'),
      newTabToggle: document.getElementById('newTabToggle'),
      addCommandBtn: document.getElementById('addCommandBtn')
    };

    // State
    const state = {
      currentCategory: 'all',
      searchQuery: '',
      is24Hour: false,
      isDarkMode: true,
      isAnimationEnabled: true,
      isWeatherEnabled: true,
      openInNewTab: false,
      searchEngine: 'https://www.startpage.com/sp/search?query={}&abp=1&t=night',
      currentTheme: 'default',
      filteredCommands: [...COMMANDS],
      settings: {},
      canvas: null,
      ctx: null,
      animationId: null,
      userLocation: null
    };

    // Load settings from localStorage
    function loadSettings() {
      const savedSettings = localStorage.getItem('room300Settings');
      if (savedSettings) {
        try {
          const parsedSettings = JSON.parse(savedSettings);
          state.is24Hour = parsedSettings.is24Hour || false;
          state.isDarkMode = parsedSettings.isDarkMode !== undefined ? parsedSettings.isDarkMode : true;
          state.isAnimationEnabled = parsedSettings.isAnimationEnabled !== undefined ? parsedSettings.isAnimationEnabled : true;
          state.isWeatherEnabled = parsedSettings.isWeatherEnabled !== undefined ? parsedSettings.isWeatherEnabled : true;
          state.openInNewTab = parsedSettings.openInNewTab || false;
          state.searchEngine = parsedSettings.searchEngine || state.searchEngine;
          state.currentTheme = parsedSettings.currentTheme || 'default';
          
          // Update UI based on loaded settings
          elements.darkModeToggle.checked = state.isDarkMode;
          elements.bgAnimationToggle.checked = state.isAnimationEnabled;
          elements.clockFormatToggle.checked = state.is24Hour;
          elements.weatherToggle.checked = state.isWeatherEnabled;
          elements.newTabToggle.checked = state.openInNewTab;
          elements.searchEngineSelect.value = state.searchEngine;
          
          // Apply theme
          applyTheme(state.currentTheme);
          
          // Set dark/light mode
          document.body.classList.toggle('light-mode', !state.isDarkMode);
          
          // Toggle animation
          toggleAnimation(state.isAnimationEnabled);
          
          // Toggle weather display
          elements.weatherDisplay.style.display = state.isWeatherEnabled ? 'flex' : 'none';
        } catch (error) {
          console.error('Error loading settings:', error);
        }
      }
    }

    // Save settings to localStorage
    function saveSettings() {
      const settings = {
        is24Hour: state.is24Hour,
        isDarkMode: state.isDarkMode,
        isAnimationEnabled: state.isAnimationEnabled,
        isWeatherEnabled: state.isWeatherEnabled,
        openInNewTab: state.openInNewTab,
        searchEngine: state.searchEngine,
        currentTheme: state.currentTheme
      };
      
      localStorage.setItem('room300Settings', JSON.stringify(settings));
    }

    // Apply theme colors
    function applyTheme(themeName) {
      // Remove active class from all options
      document.querySelectorAll('.color-option').forEach(option => {
        option.classList.remove('active');
      });
      
      // Add active class to selected theme
      document.querySelector(`[data-theme="${themeName}"]`).classList.add('active');
      
      // Apply theme colors
      const themes = {
        'default': {
          primary: '#7c3aed',
          secondary: '#10b981'
        },
        'blue-pink': {
          primary: '#3b82f6',
          secondary: '#ec4899'
        },
        'amber-red': {
          primary: '#f59e0b',
          secondary: '#ef4444'
        },
        'green-blue': {
          primary: '#10b981',
          secondary: '#3b82f6'
        },
        'purple-indigo': {
          primary: '#8b5cf6',
          secondary: '#6366f1'
        }
      };
      
      const theme = themes[themeName];
      document.documentElement.style.setProperty('--color-accent-primary', theme.primary);
      document.documentElement.style.setProperty('--color-accent-secondary', theme.secondary);
      
      state.currentTheme = themeName;
      saveSettings();
    }

    // Render commands grid
    function renderCommands() {
      elements.commandsGrid.innerHTML = '';
      
      state.filteredCommands.forEach((command, index) => {
        const commandCard = document.createElement('div');
        commandCard.className = 'command-card fadeIn';
        commandCard.style.animationDelay = `${index * 50}ms`;
        commandCard.dataset.category = command.category;
        commandCard.dataset.index = index;
        
        commandCard.innerHTML = `
          <div class="command-icon">${command.key}</div>
          <div class="command-name">${command.name}</div>
        `;
        
        commandCard.addEventListener('click', () => {
          window.open(command.url, state.openInNewTab ? '_blank' : '_self');
        });
        
        elements.commandsGrid.appendChild(commandCard);
      });
    }

    // Filter commands by category
    function filterCommands(category) {
      state.currentCategory = category;
      
      if (category === 'all') {
        state.filteredCommands = [...COMMANDS];
      } else {
        state.filteredCommands = COMMANDS.filter(command => command.category === category);
      }
      
      renderCommands();
      
      // Update active category button
      document.querySelectorAll('.category-btn').forEach(btn => {
        btn.classList.toggle('active', btn.dataset.category === category);
      });
    }

    // Search commands
    function searchCommands(query) {
      state.searchQuery = query.toLowerCase();
      
      if (!query) {
        filterCommands(state.currentCategory);
        elements.searchSuggestions.style.display = 'none';
        return;
      }
      
      // Filter commands based on search query
      const allCommands = [...COMMANDS];
      const filtered = allCommands.filter(command => 
        command.name.toLowerCase().includes(query) || 
        command.url.toLowerCase().includes(query)
      );
      
      // Show search suggestions if we have results
      if (filtered.length > 0 || query.length > 1) {
        elements.searchSuggestions.innerHTML = '';
        elements.searchSuggestions.style.display = 'block';
        
        // Add filtered commands
        filtered.slice(0, 5).forEach(command => {
          const item = document.createElement('div');
          item.className = 'suggestion-item';
          item.innerHTML = `
            <div>${command.key} ${command.name}</div>
            <div style="color: var(--color-text-secondary); font-size: 0.8rem;">${command.url}</div>
          `;
          
          item.addEventListener('click', () => {
            window.open(command.url, state.openInNewTab ? '_blank' : '_self');
            elements.searchBar.value = '';
            elements.searchSuggestions.style.display = 'none';
          });
          
          elements.searchSuggestions.appendChild(item);
        });
        
        // Add Startpage web search suggestion
        const webSearchItem = document.createElement('div');
        webSearchItem.className = 'suggestion-item';
        webSearchItem.innerHTML = `
          <div style="display: flex; align-items: center;">
            <span style="margin-right: 8px; font-size: 1.2rem;">🔍</span>
            <span>Search for "${query}" on Startpage</span>
          </div>
          <div style="color: var(--color-text-secondary); font-size: 0.8rem;">Private, secure search</div>
        `;
        
        webSearchItem.addEventListener('click', () => {
          const searchUrl = state.searchEngine.replace('{}', encodeURIComponent(query));
          window.open(searchUrl, state.openInNewTab ? '_blank' : '_self');
          elements.searchBar.value = '';
          elements.searchSuggestions.style.display = 'none';
        });
        
        elements.searchSuggestions.appendChild(webSearchItem);
        
        // Add DuckDuckGo search suggestion
        const duckSearchItem = document.createElement('div');
        duckSearchItem.className = 'suggestion-item';
        duckSearchItem.innerHTML = `
          <div style="display: flex; align-items: center;">
            <span style="margin-right: 8px; font-size: 1.2rem;">🦆</span>
            <span>Search for "${query}" on DuckDuckGo</span>
          </div>
          <div style="color: var(--color-text-secondary); font-size: 0.8rem;">Private search engine</div>
        `;
        
        duckSearchItem.addEventListener('click', () => {
          const searchUrl = `https://duckduckgo.com/?q=${encodeURIComponent(query)}`;
          window.open(searchUrl, state.openInNewTab ? '_blank' : '_self');
          elements.searchBar.value = '';
          elements.searchSuggestions.style.display = 'none';
        });
        
        elements.searchSuggestions.appendChild(duckSearchItem);
        
        // Add Brave search suggestion
        const braveSearchItem = document.createElement('div');
        braveSearchItem.className = 'suggestion-item';
        braveSearchItem.innerHTML = `
          <div style="display: flex; align-items: center;">
            <span style="margin-right: 8px; font-size: 1.2rem;">🦁</span>
            <span>Search for "${query}" on Brave Search</span>
          </div>
          <div style="color: var(--color-text-secondary); font-size: 0.8rem;">Independent search engine</div>
        `;
        
        braveSearchItem.addEventListener('click', () => {
          const searchUrl = `https://search.brave.com/search?q=${encodeURIComponent(query)}`;
          window.open(searchUrl, state.openInNewTab ? '_blank' : '_self');
          elements.searchBar.value = '';
          elements.searchSuggestions.style.display = 'none';
        });
        
        elements.searchSuggestions.appendChild(braveSearchItem);
      } else {
        elements.searchSuggestions.style.display = 'none';
      }
    }

    // Process search input
    function processSearchInput(event) {
      if (event.key === 'Enter') {
        const query = elements.searchBar.value.trim();
        
        if (query) {
          // Check if it's a URL first
          if (query.match(/^(https?:\/\/)?[\w-]+(\.[\w-]+)+([\w.,@?^=%&:/~+#-]*[\w@?^=%&/~+#-])?$/)) {
            const url = query.startsWith('http') ? query : `https://${query}`;
            window.open(url, state.openInNewTab ? '_blank' : '_self');
          } else {
            // Otherwise use selected search engine
            const searchUrl = state.searchEngine.replace('{}', encodeURIComponent(query));
            window.open(searchUrl, state.openInNewTab ? '_blank' : '_self');
          }
          
          elements.searchBar.value = '';
          elements.searchSuggestions.style.display = 'none';
        }
      } else if (event.key === 'Escape') {
        elements.searchBar.value = '';
        elements.searchSuggestions.style.display = 'none';
      } else if (event.key === 'ArrowDown') {
        // Navigate down in suggestions
        event.preventDefault();
        const suggestions = elements.searchSuggestions.querySelectorAll('.suggestion-item');
        const activeIndex = Array.from(suggestions).findIndex(item => item.classList.contains('active'));
        
        if (activeIndex === -1 && suggestions.length > 0) {
          suggestions[0].classList.add('active');
          suggestions[0].focus();
        } else if (activeIndex < suggestions.length - 1) {
          suggestions[activeIndex].classList.remove('active');
          suggestions[activeIndex + 1].classList.add('active');
          suggestions[activeIndex + 1].focus();
        }
      } else if (event.key === 'ArrowUp') {
        // Navigate up in suggestions
        event.preventDefault();
        const suggestions = elements.searchSuggestions.querySelectorAll('.suggestion-item');
        const activeIndex = Array.from(suggestions).findIndex(item => item.classList.contains('active'));
        
        if (activeIndex > 0) {
          suggestions[activeIndex].classList.remove('active');
          suggestions[activeIndex - 1].classList.add('active');
          suggestions[activeIndex - 1].focus();
        } else if (activeIndex === 0) {
          suggestions[activeIndex].classList.remove('active');
          elements.searchBar.focus();
        }
      }
    }

    // Update clock
    function updateClock() {
      const now = new Date();
      
      // Update digital clock
      const hours = state.is24Hour ? now.getHours() : now.getHours() % 12 || 12;
      const minutes = now.getMinutes().toString().padStart(2, '0');
      const seconds = now.getSeconds().toString().padStart(2, '0');
      const ampm = state.is24Hour ? '' : now.getHours() >= 12 ? ' PM' : ' AM';
      
      const clockText = `${hours}:${minutes}:${seconds}${ampm}`;
      elements.digitalClock.textContent = clockText;
      elements.digitalClock.setAttribute('data-text', clockText);
      
      // Update date display
      const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
      elements.dateDisplay.textContent = now.toLocaleDateString(undefined, options);
      
      // Update header time
      const headerHours = state.is24Hour ? now.getHours() : now.getHours() % 12 || 12;
      const headerMinutes = now.getMinutes().toString().padStart(2, '0');
      const headerAmpm = state.is24Hour ? '' : now.getHours() >= 12 ? ' PM' : ' AM';
      
      elements.currentTime.textContent = `${headerHours}:${headerMinutes}${headerAmpm}`;
    } = state.is24Hour ? now.getHours() : now.getHours() % 12 || 12;
      const headerMinutes = now.getMinutes().toString().padStart(2, '0');
      const headerAmpm = state.is24Hour ? '' : now.getHours() >= 12 ? ' PM' : ' AM';
      
      elements.currentTime.textContent = `${headerHours}:${headerMinutes}${headerAmpm}`;
    }

    // Get weather data
    async function getWeather() {
      if (!state.isWeatherEnabled) return;
      
      try {
        // For demo purposes, use hardcoded weather
        // In a real implementation, you would use a weather API
        elements.weatherDisplay.innerHTML = `<span>72°F</span><span>☀️</span>`;
        
        // With a weather API, you would do something like:
        // const response = await fetch(`https://api.weatherapi.com/v1/current.json?key=YOUR_API_KEY&q=${state.userLocation}`);
        // const data = await response.json();
        // elements.weatherDisplay.innerHTML = `<span>${data.current.temp_f}°F</span><span>${getWeatherEmoji(data.current.condition.code)}</span>`;
      } catch (error) {
        console.error('Error fetching weather:', error);
        elements.weatherDisplay.innerHTML = `<span>--°F</span><span>❓</span>`;
      }
    }

    // Background animation
    function initBackgroundAnimation() {
      state.canvas = elements.backgroundCanvas;
      state.ctx = state.canvas.getContext('2d');
      
      // Set canvas dimensions
      state.canvas.width = window.innerWidth;
      state.canvas.height = window.innerHeight;
      
      // Initialize grid for vaporwave effect
      const gridSize = 20;
      const gridSpacing = 80;
      const grid = [];
      
      for (let x = 0; x < gridSize; x++) {
        for (let y = 0; y < gridSize; y++) {
          grid.push({
            x: x * gridSpacing - (gridSize * gridSpacing) / 2,
            y: y * gridSpacing - (gridSize * gridSpacing) / 2,
            z: 0,
            origX: x * gridSpacing - (gridSize * gridSpacing) / 2,
            origY: y * gridSpacing - (gridSize * gridSpacing) / 2
          });
        }
      }
      
      // Animation function
      function animate() {
        state.ctx.clearRect(0, 0, state.canvas.width, state.canvas.height);
        
        // Draw the vaporwave grid
        state.ctx.save();
        state.ctx.translate(state.canvas.width / 2, state.canvas.height / 2);
        
        const now = Date.now() / 1000;
        
        // Update grid points
        for (let i = 0; i < grid.length; i++) {
          const point = grid[i];
          point.z = Math.sin(now + point.origX / 100) * 50 + Math.cos(now + point.origY / 100) * 50;
        }
        
        // Draw grid lines
        state.ctx.strokeStyle = 'rgba(255, 0, 255, 0.3)';
        state.ctx.lineWidth = 1;
        
        // Draw horizontal grid lines
        for (let y = 0; y < gridSize; y++) {
          state.ctx.beginPath();
          for (let x = 0; x < gridSize; x++) {
            const point = grid[y * gridSize + x];
            if (x === 0) {
              state.ctx.moveTo(point.x, point.y + point.z);
            } else {
              state.ctx.lineTo(point.x, point.y + point.z);
            }
          }
          state.ctx.stroke();
        }
        
        // Draw vertical grid lines
        for (let x = 0; x < gridSize; x++) {
          state.ctx.beginPath();
          for (let y = 0; y < gridSize; y++) {
            const point = grid[y * gridSize + x];
            if (y === 0) {
              state.ctx.moveTo(point.x, point.y + point.z);
            } else {
              state.ctx.lineTo(point.x, point.y + point.z);
            }
          }
          state.ctx.stroke();
        }
        
        // Draw floating geometric shapes
        const numShapes = 20;
        for (let i = 0; i < numShapes; i++) {
          const t = now * 0.5 + i * 100;
          const x = Math.sin(t / 1000) * state.canvas.width * 0.4;
          const y = Math.cos(t / 1000) * state.canvas.height * 0.3;
          const size = 20 + Math.sin(t / 800) * 15;
          
          // Alternate between triangles and rectangles
          if (i % 2 === 0) {
            // Draw triangle
            state.ctx.beginPath();
            state.ctx.moveTo(x, y - size);
            state.ctx.lineTo(x + size, y + size);
            state.ctx.lineTo(x - size, y + size);
            state.ctx.closePath();
            state.ctx.fillStyle = `rgba(0, 255, 255, ${0.1 + Math.sin(t / 500) * 0.05})`;
            state.ctx.fill();
          } else {
            // Draw rectangle
            state.ctx.fillStyle = `rgba(255, 0, 255, ${0.1 + Math.cos(t / 500) * 0.05})`;
            state.ctx.fillRect(x - size / 2, y - size / 2, size, size);
          }
        }
        
        state.ctx.restore();
        
        state.animationId = requestAnimationFrame(animate);
      }
      
      // Start animation if enabled
      if (state.isAnimationEnabled) {
        animate();
      }
      
      // Handle window resize
      window.addEventListener('resize', () => {
        state.canvas.width = window.innerWidth;
        state.canvas.height = window.innerHeight;
      });
    }

    // Toggle animation
    function toggleAnimation(enabled) {
      state.isAnimationEnabled = enabled;
      
      if (enabled) {
        elements.backgroundCanvas.style.display = 'block';
        if (!state.animationId) {
          initBackgroundAnimation();
        }
      } else {
        elements.backgroundCanvas.style.display = 'none';
        if (state.animationId) {
          cancelAnimationFrame(state.animationId);
          state.animationId = null;
        }
      }
      
      saveSettings();
    }

    // Event listeners
    function setupEventListeners() {
      // Category filtering
      elements.categories.addEventListener('click', (e) => {
        const categoryBtn = e.target.closest('.category-btn');
        if (categoryBtn) {
          filterCommands(categoryBtn.dataset.category);
        }
      });
      
      // Search functionality
      elements.searchBar.addEventListener('input', () => {
        searchCommands(elements.searchBar.value);
      });
      
      elements.searchBar.addEventListener('keydown', processSearchInput);
      
      elements.searchBar.addEventListener('focus', () => {
        if (elements.searchBar.value) {
          elements.searchSuggestions.style.display = 'block';
        }
      });
      
      // Close search suggestions when clicking outside
      document.addEventListener('click', (e) => {
        if (!e.target.closest('.search-wrapper')) {
          elements.searchSuggestions.style.display = 'none';
        }
      });
      
      // Quick actions button
      elements.quickActionBtn.addEventListener('click', () => {
        elements.quickMenu.classList.toggle('open');
      });
      
      // Settings panel
      elements.openSettings.addEventListener('click', () => {
        elements.settingsPanel.classList.add('open');
        elements.quickMenu.classList.remove('open');
      });
      
      elements.closeSettings.addEventListener('click', () => {
        elements.settingsPanel.classList.remove('open');
      });
      
      // Shortcuts modal
      elements.openShortcuts.addEventListener('click', () => {
        elements.shortcutsModal.style.display = 'flex';
        elements.quickMenu.classList.remove('open');
      });
      
      elements.closeShortcuts.addEventListener('click', () => {
        elements.shortcutsModal.style.display = 'none';
      });
      
      // Theme toggle
      elements.toggleTheme.addEventListener('click', () => {
        elements.darkModeToggle.checked = !elements.darkModeToggle.checked;
        state.isDarkMode = elements.darkModeToggle.checked;
        document.body.classList.toggle('light-mode', !state.isDarkMode);
        elements.quickMenu.classList.remove('open');
        saveSettings();
      });
      
      // Animation toggle
      elements.toggleAnimation.addEventListener('click', () => {
        elements.bgAnimationToggle.checked = !elements.bgAnimationToggle.checked;
        toggleAnimation(elements.bgAnimationToggle.checked);
        elements.quickMenu.classList.remove('open');
      });
      
      // Settings toggles
      elements.darkModeToggle.addEventListener('change', () => {
        state.isDarkMode = elements.darkModeToggle.checked;
        document.body.classList.toggle('light-mode', !state.isDarkMode);
        saveSettings();
      });
      
      elements.bgAnimationToggle.addEventListener('change', () => {
        toggleAnimation(elements.bgAnimationToggle.checked);
      });
      
      elements.clockFormatToggle.addEventListener('change', () => {
        state.is24Hour = elements.clockFormatToggle.checked;
        updateClock();
        saveSettings();
      });
      
      elements.weatherToggle.addEventListener('change', () => {
        state.isWeatherEnabled = elements.weatherToggle.checked;
        elements.weatherDisplay.style.display = state.isWeatherEnabled ? 'flex' : 'none';
        if (state.isWeatherEnabled) {
          getWeather();
        }
        saveSettings();
      });
      
      elements.newTabToggle.addEventListener('change', () => {
        state.openInNewTab = elements.newTabToggle.checked;
        saveSettings();
      });
      
      elements.searchEngineSelect.addEventListener('change', () => {
        state.searchEngine = elements.searchEngineSelect.value;
        saveSettings();
      });
      
      // Theme color options
      document.querySelectorAll('.color-option').forEach(option => {
        option.addEventListener('click', () => {
          applyTheme(option.dataset.theme);
        });
      });
      
      // Add new command button
      elements.addCommandBtn.addEventListener('click', () => {
        // In a real implementation, you would show a form to add a new command
        alert('This feature would allow you to add custom commands to your dashboard.');
      });
      
      // Keyboard shortcuts
      document.addEventListener('keydown', (e) => {
        // Show search bar on / press
        if (e.key === '/' && !e.target.closest('input')) {
          e.preventDefault();
          elements.searchBar.focus();
        }
        
        // Show settings on s press
        if (e.key === 's' && !e.target.closest('input') && !e.target.closest('textarea')) {
          e.preventDefault();
          elements.settingsPanel.classList.add('open');
        }
        
        // Show shortcuts on ? press
        if (e.key === '?' && !e.target.closest('input') && !e.target.closest('textarea')) {
          e.preventDefault();
          elements.shortcutsModal.style.display = 'flex';
        }
        
        // Toggle quick menu on q press
        if (e.key === 'q' && !e.target.closest('input') && !e.target.closest('textarea')) {
          e.preventDefault();
          elements.quickMenu.classList.toggle('open');
        }
        
        // Alt + D to toggle dark mode
        if (e.key === 'd' && e.altKey) {
          e.preventDefault();
          elements.darkModeToggle.checked = !elements.darkModeToggle.checked;
          state.isDarkMode = elements.darkModeToggle.checked;
          document.body.classList.toggle('light-mode', !state.isDarkMode);
          saveSettings();
        }
        
        // Alt + A to toggle animation
        if (e.key === 'a' && e.altKey) {
          e.preventDefault();
          elements.bgAnimationToggle.checked = !elements.bgAnimationToggle.checked;
          toggleAnimation(elements.bgAnimationToggle.checked);
        }
        
        // Filter categories with number keys
        if (['1', '2', '3', '4', '5'].includes(e.key) && !e.target.closest('input') && !e.target.closest('textarea')) {
          e.preventDefault();
          const categories = ['all', 'mail', 'media', 'tools', 'storage'];
          filterCommands(categories[parseInt(e.key) - 1]);
        }
      });
    }

    // Initialize
    function init() {
      // Load settings
      loadSettings();
      
      // Render commands
      renderCommands();
      
      // Setup event listeners
      setupEventListeners();
      
      // Start clock
      updateClock();
      setInterval(updateClock, 1000);
      
      // Get weather
      getWeather();
      
      // Initialize background animation
      initBackgroundAnimation();
    }

    // Start the app
    document.addEventListener('DOMContentLoaded', init);
  </script>
</body>
</html>
